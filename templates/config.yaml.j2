---
# {{ ansible_managed }}

node-name: {{ inventory_hostname_short }}
{% if k3s_url | d() %}
server: "{{ k3s_url }}"
{% endif %}
{% if k3s_token | d() %}
token: "{{ k3s_token }}"
{% endif %}
{% if k3s_resolv_conf | d() %}
resolv-conf: {{ k3s_conf_dir }}/resolv.conf
{% endif %}
{% for label in k3s_labels %}
node-label: {{ label }}
{% endfor %}
{% for taint in k3s_taints %}
node-taint: {{ taint }}
{% endfor %}
{{ k3s_config | to_nice_yaml }}
